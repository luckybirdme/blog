---
title: Hash 简介
date: 2020-04-06 22:17:04
tags: Hash
---

> Hash

<!-- more -->

## 一. 定义
Hash也称散列、哈希，对应的英文都是Hash。基本原理就是把任意长度的输入，通过Hash算法变成固定长度的输出。这个映射的规则就是对应的Hash算法，而原始数据映射后的字符串就是哈希值。经常使用的MD5和SHA都是历史悠久的Hash算法。

```php
// php md5 算法
echo md5("123456");
// e10adc3949ba59abbe56e057f20f883e
echo md5("789");
// 68053af2923e00204c3ca7c6a3150cf7
```

## 二. 特点

1. 输入数据的微小变化会得到完全不同的hash值，相同的数据会得到相同的值

2. 从Hash值不可以反向推导出原始的数据，映射后的数据跟原始数据没有对应关系

3. Hash算法的执行效率要高效，长的文本也能快速地计算出哈希值

4. Hash算法的冲突概率要小，即不同输入映射成相同的输出概率尽可能小
由于hash的原理是将输入空间的值映射成hash空间内，而hash值的空间远小于输入的空间。根据抽屉原理，一定会存在不同的输入被映射成相同输出的情况。那么作为一个好的hash算法，就需要这种冲突的概率尽可能小。


## 三.用途

1. 文件校验
判断一个文件是否被改变过，最简单方法是对比文件前后的 md5 值是否改变，因为文件内容任意改动，经过 md5 算法得到 Hash 都会不一样。
```sh
[root@ ~]# echo "123456" > test.txt
[root@ ~]# md5sum test.txt 
f447b20a7fcbf53a5d5be013ea0b15af  test.txt
[root@ ~]# echo "1234567" > test.txt
[root@ ~]# md5sum test.txt 
1b504d3328e16fdf281d1fb9516dd90b  test.txt
```

2. 信息加密
假设网站用户登录账户和密码采取明文保存，一旦被脱库，会导致严重后果。如果将密码通过 Hash 算法加密保存，即使被黑客获得 Hash 密码，也无法反推出真实的密码。
HTTP 协议是明文传播的，在公共网络容易被劫持，从而导致信息泄露；现在主流 HTTPS 协议，这里的 S 一般指 SSL/TLS，它会对报文进行加密传输(比如 SHA 算法加密)，任何数据篡改和窃听都是无效。

![](http://qiniucdn.luckybird.me/blog/img/2020/HTTPS_Hash.png)


3. 负载均衡，[具体参考文章](https://www.jianshu.com/p/4660a8a1f132)