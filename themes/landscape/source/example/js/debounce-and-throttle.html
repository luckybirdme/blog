<!DOCTYPE html>
<html>
    <head>
    </head>
<body>
    <script type="text/javascript">

        forTest();            

        function forTest(){
            var testThrottle = throttle(get_ticket);
            var testDebounce = debounce(check_user);
            for(var i=0;i<15;i++){
                setTimeout(function(){
                    //testThrottle();
                    testDebounce();
                },100*i);
            };

        }

        function get_ticket(){
            console.log('shoot shoot shoot');
        }


        function throttle(fn,interval=300) {
            var running = false;
            console.log('throttle init');
            return function () {
                if (running) {
                    console.log('running');
                    return;
                };
                running = true;
                var _this = this;
                var _args = arguments;
                setTimeout(function(){
                    console.log('run start');
                    fn.apply(_this, _args);
                    running = false;
                    console.log('run end');
                },interval);
            };
        }

        function check_user(){
            console.log('check user');
        } 

        function debounce(fn, interval=300) {
            var timeout = null;
            console.log('debounce init');
            return function () {
                console.log('wait again');
                clearTimeout(timeout);
                var _this = this;
                var _args = arguments;
                timeout = setTimeout(function(){
                    console.log('run start');
                    fn.apply(_this, _args);
                    console.log('run end');
                }, interval);
            };
        }
    </script>
</body>
</html>
